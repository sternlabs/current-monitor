EESchema Schematic File Version 2
LIBS:drdc3105
LIBS:relay
LIBS:lt6102
LIBS:zener
LIBS:k22f-64lqfp
LIBS:MKL26ZxxVFM4
LIBS:fuse
LIBS:schottky
LIBS:max6070
LIBS:ltc3260
LIBS:lm27313
LIBS:lt6106
LIBS:-vs
LIBS:+vs
LIBS:+3v
LIBS:-15v
LIBS:+15v
LIBS:com
LIBS:sip32401a
LIBS:pnp
LIBS:phone-3
LIBS:npn
LIBS:esp-12
LIBS:conn-8
LIBS:conn-7
LIBS:conn-6
LIBS:conn-5
LIBS:conn-3
LIBS:bat
LIBS:aat1217
LIBS:jumper
LIBS:pmos
LIBS:pot
LIBS:buck-sot23-5
LIBS:tp4056
LIBS:xtal
LIBS:vutmi
LIBS:vpll
LIBS:vout
LIBS:vio
LIBS:vin
LIBS:vcore
LIBS:vbu
LIBS:varef
LIBS:vana
LIBS:usb334x
LIBS:usb
LIBS:ts3usb31
LIBS:tps27081a
LIBS:tpd4s012
LIBS:tlv713
LIBS:thermistor
LIBS:testpoint
LIBS:test
LIBS:tactile-4
LIBS:spiflash
LIBS:solder-jumper-nc
LIBS:sit1602
LIBS:r4
LIBS:r
LIBS:pwr
LIBS:power_flag
LIBS:nmos
LIBS:mpu6050
LIBS:mpu-6050
LIBS:mpl3115a2
LIBS:mounting-hole
LIBS:mounthole
LIBS:microsd
LIBS:mic5205
LIBS:mchck
LIBS:max9938
LIBS:mag3110
LIBS:lpddrx16
LIBS:lm3671
LIBS:led
LIBS:l
LIBS:jtag
LIBS:ip425xcz12
LIBS:ina199
LIBS:gnd
LIBS:ferrite
LIBS:drv883x
LIBS:debugheader
LIBS:d
LIBS:cp
LIBS:conn-4
LIBS:conn-2x5
LIBS:conn-2
LIBS:cm1624
LIBS:c
LIBS:ant
LIBS:USB3300
LIBS:SAM3U-144
LIBS:ICE40HX4K-144
LIBS:+5v
LIBS:+3v3
LIBS:+1v8
LIBS:+1v2
LIBS:in-amp
LIBS:op-amp
LIBS:current-monitor-cache
EELAYER 25 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 7
Title "High Precision Current Monitor"
Date "2015-08-25"
Rev "0"
Comp "sternlabs"
Comment1 "(c) 2015 Simon Schubert"
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Sheet
S 3750 1000 1950 1400
U 55DBB4FF
F0 "In/Out, Shunt, Calibration" 60
F1 "shunt.sch" 60
F2 "RELAY_INOUT_SHORT" I R 5700 1200 60 
F3 "RELAY_CALIBRATE" I R 5700 1350 60 
F4 "CALIBRATE_5V" I R 5700 1500 60 
F5 "CALIBRATE_3V" I R 5700 1650 60 
F6 "CALIBRATE_3uA" I R 5700 2200 60 
F7 "CALIBRATE_300uA" I R 5700 2050 60 
F8 "CALIBRATE_30mA" I R 5700 1900 60 
F9 "SENSE+" O L 3750 1550 60 
F10 "SENSE-" O L 3750 1850 60 
$EndSheet
$Sheet
S 3750 2750 1950 650 
U 55CD3F2D
F0 "Current Sense Fine Range" 60
F1 "sense-fine.sch" 60
F2 "SENSE+" I L 3750 2900 60 
F3 "SENSE-" I L 3750 3200 60 
F4 "SENSE_FINE" O R 5700 2900 60 
F5 "REF_ADJUST" I R 5700 3050 60 
$EndSheet
$Sheet
S 3750 3750 1950 650 
U 55CD3FB8
F0 "Current Sense Coarse Range" 60
F1 "sense-coarse.sch" 60
F2 "SENSE+" I L 3750 3900 60 
F3 "SENSE-" I L 3750 4200 60 
F4 "SENSE_COARSE" O R 5700 3900 60 
$EndSheet
$Sheet
S 3750 4750 1950 600 
U 55D4F876
F0 "Sense Voltage" 60
F1 "sense-voltage.sch" 60
F2 "SENSE_VOLTAGE" O R 5700 4900 60 
F3 "INPUT_VOLTAGE" I L 3750 4900 60 
$EndSheet
$Sheet
S 7150 1000 1550 5200
U 55D37DCB
F0 "MCU" 60
F1 "mcu.sch" 60
F2 "SENSE_COARSE" I L 7150 3900 60 
F3 "SENSE_FINE" I L 7150 2900 60 
F4 "SENSE_VOLTAGE" I L 7150 4900 60 
F5 "REF_ADJUST" O L 7150 3050 60 
F6 "VS_ENABLE" O L 7150 5900 60 
F7 "RELAY_INOUT_SHORT" O L 7150 1200 60 
F8 "RELAY_CALIBRATE" O L 7150 1350 60 
F9 "CALIBRATE_5V" O L 7150 1500 60 
F10 "CALIBRATE_3V" O L 7150 1650 60 
F11 "CALIBRATE_30mA" O L 7150 1900 60 
F12 "CALIBRATE_300uA" O L 7150 2050 60 
F13 "CALIBRATE_3uA" O L 7150 2200 60 
$EndSheet
$Sheet
S 3750 5700 1950 500 
U 55CDF9F7
F0 "Power Supply" 60
F1 "power.sch" 60
F2 "VS_ENABLE" I R 5700 5900 60 
$EndSheet
Text GLabel 3450 2900 0    60   Input ~ 0
SENSE+
Text GLabel 3450 3200 0    60   Input ~ 0
SENSE-
Wire Wire Line
	3450 2900 3750 2900
Wire Wire Line
	3450 3200 3750 3200
Text GLabel 3450 3900 0    60   Input ~ 0
SENSE+
Text GLabel 3450 4200 0    60   Input ~ 0
SENSE-
Wire Wire Line
	3450 3900 3750 3900
Wire Wire Line
	3450 4200 3750 4200
Wire Wire Line
	5700 2900 7150 2900
Wire Wire Line
	5700 3900 7150 3900
Wire Wire Line
	7150 3050 5700 3050
Wire Wire Line
	5700 5900 7150 5900
Wire Wire Line
	5700 4900 7150 4900
Text GLabel 3450 4900 0    60   Input ~ 0
SENSE+
Wire Wire Line
	3450 4900 3750 4900
Text Notes 9200 3400 0    60   ~ 0
XXX add current sense jumpers for analog and mcu
Text GLabel 3450 1550 0    60   Output ~ 0
SENSE+
Text GLabel 3450 1850 0    60   Output ~ 0
SENSE-
Wire Wire Line
	3450 1550 3750 1550
Wire Wire Line
	3450 1850 3750 1850
Wire Wire Line
	7150 1200 5700 1200
Wire Wire Line
	5700 1350 7150 1350
Wire Wire Line
	7150 1500 5700 1500
Wire Wire Line
	5700 1650 7150 1650
Wire Wire Line
	7150 1900 5700 1900
Wire Wire Line
	5700 2050 7150 2050
Wire Wire Line
	7150 2200 5700 2200
$EndSCHEMATC
